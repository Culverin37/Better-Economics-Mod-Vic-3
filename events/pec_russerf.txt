namespace = pec_russerf

pec_russerf.1 = {
	type = country_event
	placement = root
	title = pec_russerf.1.t
	desc = pec_russerf.1.d
	flavor = pec_russerf.1.f

	duration = 3

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	event_image = {
		video = "europenorthamerica_russian_serfs"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	immediate = {
		ruler = {
			save_scope_as = pec_russerf_ruler
		}
	}

	trigger = {
		# triggered by journal entry
	}

	option = {
		name = pec_russerf.1.a
		default_option = yes
		custom_tooltip = {
			text = pec_russerf1_tt
		}
		add_modifier = {
			name = pec_russian_serfdom_mod
		}
		add_radicals = {
			value = 0.1
			pop_type = aristocrats
		}
		add_radicals = {
			value = 0.02
			pop_type = peasants
		}
	}
}

pec_russerf.2 = {
	type = country_event
	placement = root
	title = pec_russerf.2.t
	desc = pec_russerf.2.d
	flavor = pec_russerf.2.f

	duration = 3

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	event_image = {
		video = "europenorthamerica_rich_and_poor"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	immediate = {
		ruler = {
			save_scope_as = pec_russerf_ruler
		}
	}

	trigger = {
		# triggered by journal entry
	}

	option = {
		name = pec_russerf.2.a # historical compromise solution - serfs buy their freedom over 49 years
		default_option = yes
		ai_chance = {
			base = 90
			modifier = {
				trigger = {
					ig:ig_landowners = {
						is_marginal = yes
					}
				}
				add = -85
			}
		}
		activate_law = law_type:law_tenant_farmers
		add_modifier = {
			name = pec_modifier_russerf_compromise
			years = 49
			is_decaying = yes
		}
		add_loyalists = {
			value = 0.1
			pop_type = aristocrats
		}
		add_loyalists = {
			value = 0.03
			pop_type = peasants
		}
		if = {
			limit = {
				ig:ig_landowners = {
					leader = {
						NOR = {
							has_ideology = ideology:ideology_market_liberal
							has_ideology = ideology:ideology_abolitionist
							has_ideology = ideology:ideology_land_reformer
							has_ideology = ideology:ideology_distributist
							has_ideology = ideology:ideology_pec_liberal_nationalist
							has_ideology = ideology:ideology_pec_metallist
							has_ideology = ideology:ideology_pec_centralbanker
						}
					}
				}
			}
			ig:ig_landowners = {
				add_modifier = {
					name = pec_modifier_russerf_compromise_igmod
					months = 25
					is_decaying = yes
				}
			}
		}
		add_treasury = -1000000
		if = {
			limit = {
				ig:ig_devout = {
					leader = {
						NOR = {
							has_ideology = ideology:ideology_market_liberal
							has_ideology = ideology:ideology_abolitionist
							has_ideology = ideology:ideology_land_reformer
							has_ideology = ideology:ideology_distributist
							has_ideology = ideology:ideology_pec_liberal_nationalist
							has_ideology = ideology:ideology_pec_metallist
							has_ideology = ideology:ideology_pec_centralbanker
						}
					}
				}
			}
			ig:ig_devout = {
				add_modifier = {
					name = pec_modifier_russerf_compromise_igmod
					months = 25
					is_decaying = yes
				}
			}
		}
	}
	option = {
		name = pec_russerf.2.b # overrule the landowners
		ai_chance = {
			base = 25
			modifier = {
				trigger = {
					ig:ig_landowners = {
						is_in_government = no
					}
				}
				add = 25
			}
			modifier = {
				trigger = {
					ig:ig_landowners = {
						is_powerful = no
					}
				}
				add = 15
			}
			modifier = {
				trigger = {
					ig:ig_landowners = {
						is_marginal = yes
					}
				}
				add = 150
			}
		}
		activate_law = law_type:law_tenant_farmers
		add_radicals = {
			value = 0.25
			pop_type = aristocrats
		}
		add_radicals = {
			value = 0.20
			pop_type = clergymen
		}
		add_loyalists = {
			value = 0.12
			pop_type = peasants
		}
	}

	option = {
		name = pec_russerf.2.c # privatize the land
		ai_chance = {
			base = 0
			modifier = {
				trigger = {
					any_interest_group = {
						is_in_government = yes
						leader = {
							OR = {
								has_ideology = ideology:ideology_market_liberal
								has_ideology = ideology:ideology_pec_centralbanker
								has_ideology = ideology:ideology_pec_metallist
							}
						}
					}
				}
				add = 40
			}
		}
		highlighted_option = yes
		trigger = {
			OR = {
				has_technology_researched = mutual_funds
				ig:ig_industrialists = { is_powerful = yes }
				ig:ig_industrialists = { is_in_government = yes }
			}
		}
		activate_law = law_type:law_commercialized_agriculture
		add_radicals = {
			value = 0.15
			pop_type = aristocrats
		}
		add_radicals = {
			value = 0.20
			pop_type = clergymen
		}
		add_loyalists = {
			value = 0.12
			pop_type = capitalists
		}
	}

	option = {
		name = pec_russerf.2.e # the tsar will look after the people
		highlighted_option = yes
		ai_chance = {
			base = 5
		}
		trigger = {
			any_interest_group = {
				is_in_government = yes
				leader = {
					OR = {
						has_ideology = ideology:ideology_communist
						has_ideology = ideology:ideology_anarchist
						has_ideology = ideology:ideology_vanguardist
						has_ideology = ideology:ideology_pec_agrarian_socialist
					}
				}
			}
		}
		activate_law = law_type:law_collectivized_agriculture
		add_radicals = {
			value = 0.50
			pop_type = aristocrats
		}
		add_radicals = {
			value = 0.50
			pop_type = capitalists
		}
		add_radicals = {
			value = 0.33
			pop_type = farmers
		}
		add_radicals = {
			value = 0.25
			pop_type = clergymen
		}
		add_loyalists = {
			value = 0.12
			pop_type = peasants
		}
	}
}

pec_russerf.3 = {
	type = country_event
	placement = root
	title = pec_russerf.3.t
	desc = pec_russerf.3.d
	flavor = pec_russerf.3.f

	duration = 3

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	event_image = {
		video = "europenorthamerica_russian_serfs"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	immediate = {
		ruler = {
			save_scope_as = pec_russerf_ruler
		}
	}

	trigger = {
		# triggered by journal entry
	}

	option = {
		name = pec_russerf.3.a # landowner and devout boost, abolitionist tsar abdicates
		default_option = yes
		ai_chance = {
			base = 80
		}
		ig:ig_landowners = {
			add_modifier = {
				name = pec_russerf_defeated_igmod
				months = 120
				is_decaying = yes
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = pec_russerf_defeated_igmod
				months = 120
				is_decaying = yes
			}
		}
		add_loyalists = {
			value = 0.25
			pop_type = aristocrats
		}
		add_radicals = {
			value = 0.1
			pop_type = peasants
		}
		if = {
			limit = {
				ruler = {
					OR = {
						has_ideology = ideology:ideology_market_liberal
						has_ideology = ideology:ideology_abolitionist
						has_ideology = ideology:ideology_land_reformer
						has_ideology = ideology:ideology_distributist
						has_ideology = ideology:ideology_pec_liberal_nationalist
						has_ideology = ideology:ideology_pec_metallist
						has_ideology = ideology:ideology_pec_centralbanker
					}
				}
			}
			custom_tooltip = {
				text = pec_russerf3_tt
				ruler = {
					kill_character = yes
				}
			}
		}
	}
	option = {
		name = pec_russerf.3.b # debt slavery
		ai_chance = {
			base = 20
		}
		activate_law = law_type:law_debt_slavery
		ig:ig_landowners = {
			add_modifier = {
				name = pec_russerf_defeated_igmod
				months = 60
				is_decaying = yes
			}
			add_ideology = ideology_pro_slavery
		}
		add_loyalists = {
			value = 0.05
			pop_type = aristocrats
		}
		add_radicals = {
			value = 0.1
			strata = poor
		}
		add_radicals = {
			value = 0.1
			pop_type = peasants
		}
		if = {
			limit = {
				ruler = {
					OR = {
						has_ideology = ideology:ideology_market_liberal
						has_ideology = ideology:ideology_abolitionist
						has_ideology = ideology:ideology_land_reformer
						has_ideology = ideology:ideology_distributist
						has_ideology = ideology:ideology_pec_liberal_nationalist
						has_ideology = ideology:ideology_pec_metallist
						has_ideology = ideology:ideology_pec_centralbanker
					}
				}
			}
			custom_tooltip = {
				text = pec_russerf3_tt
				ruler = {
					kill_character = yes
				}
			}
		}
	}
}

pec_russerf.4 = {
	type = country_event
	placement = scope:pec_russerf4_narodniktarget
	title = pec_russerf.4.t
	desc = pec_russerf.4.d
	flavor = pec_russerf.4.f

	duration = 3
	cooldown = { months = 6 }

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	event_image = {
		video = "southamerica_public_figure_assassination"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	immediate = {
		random_scope_state = {
			limit = {
				is_incorporated = yes
			}
			save_scope_as = pec_russerf4_narodniktarget
		}
		random_scope_character = {
			limit = {
				has_ideology = ideology:ideology_pec_agrarian_socialist
				OR = {
					has_role = agitator
					has_role = politician
				}
			}
			save_scope_as = pec_russerf4_narodnikleader
		}
	}

	trigger = {
		any_scope_state = {
			is_incorporated = yes
		}
		any_scope_character = {
			has_ideology = ideology:ideology_pec_agrarian_socialist
			OR = {
				has_role = politician
				has_role = agitator
			}
		}
	}

	option = {
		name = pec_russerf.4.a # terror strikes
		default_option = yes
		ai_chance = {
			base = 5
		}
		scope:pec_russerf4_narodniktarget = {
			add_modifier = {
				name = pec_russerf4_narodnikterror
				months = 37
			}
			add_radicals_in_state = {
				value = 0.15
				pop_type = peasants
			}
			add_radicals_in_state = {
				value = 0.50
				pop_type = academics
			}
			state_region = {
				add_devastation = 25
			}
		}
		scope:pec_russerf4_narodnikleader = {
			add_modifier = {
				name = pec_russerf4_narodnikpopularity
				months = 61
			}
		}
	}
	option = {
		name = pec_russerf.4.b # round up the narodniks after the fact
		ai_chance = {
			base = 25
		}
		highlighted_option = yes
		trigger = {
			institution_investment_level = {
				institution = institution_police
				value >= 3
			}
		}
		scope:pec_russerf4_narodniktarget = {
			add_modifier = {
				name = pec_russerf4_narodnikterror
				multiplier = 0.5
				months = 37
			}
			add_radicals_in_state = {
				value = 0.06
				pop_type = peasants
			}
			add_radicals_in_state = {
				value = 0.50
				pop_type = academics
			}
			state_region = {
				add_devastation = 10
			}
		}
		scope:pec_russerf4_narodnikleader = {
			add_modifier = {
				name = pec_russerf4_narodnikpopularity
				multiplier = 0.5
				months = 61
			}
		}
	}

	option = {
		name = pec_russerf.4.c # secret police prevents it
		ai_chance = {
			base = 100
		}
		highlighted_option = yes
		trigger = {
			has_law = law_type:law_secret_police
			institution_investment_level = {
				institution = institution_home_affairs
				value >= 3
			}
		}
		scope:pec_russerf4_narodniktarget = {
			add_radicals_in_state = {
				value = 0.03
				pop_type = peasants
			}
			add_radicals_in_state = {
				value = 0.25
				pop_type = academics
			}
			add_loyalists_in_state = {
				value = 0.1
				pop_type = aristocrats
			}
			add_loyalists_in_state = {
				value = 0.1
				pop_type = clergymen
			}
		}
	}

	option = {
		name = pec_russerf.4.e # target the leader
		ai_chance = {
			base = 25
		}
		highlighted_option = yes
		trigger = {
			OR = {
				has_law = law_type:law_secret_police
				has_law = law_type:law_national_guard
			}
			institution_investment_level = {
				institution = institution_home_affairs
				value >= 3
			}
		}
		scope:pec_russerf4_narodniktarget = {
			add_modifier = {
				name = pec_russerf4_narodnikterror
				months = 37
			}
			add_radicals_in_state = {
				value = 0.10
				pop_type = peasants
			}
			add_radicals_in_state = {
				value = 0.25
				pop_type = academics
			}
			state_region = {
				add_devastation = 15
			}
		}
		scope:pec_russerf4_narodnikleader = {
			random_list = {
				30 = {
					add_modifier = {
						name = pec_russerf4_narodnikpopularity
						months = 61
					}
				}
				70 = {
					kill_character = yes
				}
			}
		}
	}
}

# Priest organizes march against exploitation of serfs
pec_russerf.5 = {
	type = country_event
	placement = root
	title = pec_russerf.5.t
	desc = pec_russerf.5.d
	flavor = pec_russerf.5.f

	duration = 3
	cooldown = { months = 60 }

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	event_image = {
		video = "southamerica_christianity"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	immediate = {
		ig:ig_devout = {
			save_scope_as = pec_russerf5_ig
		}
		random_scope_state = {
			limit = {
				is_capital = yes
			}
			save_scope_as = pec_russerf5_capital
		}
		random_scope_state = {
			limit = {
				is_capital = no
				is_incorporated = yes
			}
			save_scope_as = pec_russerf5_origin
		}
	}

	trigger = {
		ig:ig_devout = {
			leader = {
				NOR = {
					has_ideology = ideology:ideology_market_liberal
					has_ideology = ideology:ideology_abolitionist
					has_ideology = ideology:ideology_land_reformer
					has_ideology = ideology:ideology_distributist
					has_ideology = ideology:ideology_pec_liberal_nationalist
					has_ideology = ideology:ideology_pec_metallist
					has_ideology = ideology:ideology_pec_centralbanker
					has_ideology = ideology:ideology_vanguardist
					has_ideology = ideology:ideology_communist
					has_ideology = ideology:ideology_anarchist
				}
			}
		}
	}

	option = {
		name = pec_russerf.5.a # allow the procession to go through
		default_option = yes
		ai_chance = {
			base = 25
			modifier = {
				trigger = {
					ruler = {
						OR = {
							has_ideology = ideology:ideology_market_liberal
							has_ideology = ideology:ideology_abolitionist
							has_ideology = ideology:ideology_land_reformer
							has_ideology = ideology:ideology_distributist
							has_ideology = ideology:ideology_pec_liberal_nationalist
							has_ideology = ideology:ideology_pec_metallist
							has_ideology = ideology:ideology_pec_centralbanker
							has_ideology = ideology:ideology_vanguardist
							has_ideology = ideology:ideology_communist
							has_ideology = ideology:ideology_anarchist
						}
					}
				}
				add = 100
			}
		}
		custom_tooltip = {
			text = russerf_tt_progress_5
			change_variable = { name = pec_russerf_progress_var add = 5 }
		}
		add_loyalists = {
			value = 0.01
			pop_type = clergymen
		}
		add_radicals = {
			value = 0.05
			pop_type = aristocrats
		}
		scope:pec_russerf5_capital = {
			add_radicals_in_state = {
				value = 0.10
				pop_type = aristocrats
			}
		}
	}
	option = {
		name = pec_russerf.5.b # forbid the procession
		ai_chance = {
			base = 25
			modifier = {
				trigger = {
					ruler = {
						NOR = {
							has_ideology = ideology:ideology_market_liberal
							has_ideology = ideology:ideology_abolitionist
							has_ideology = ideology:ideology_land_reformer
							has_ideology = ideology:ideology_distributist
							has_ideology = ideology:ideology_pec_liberal_nationalist
							has_ideology = ideology:ideology_pec_metallist
							has_ideology = ideology:ideology_pec_centralbanker
							has_ideology = ideology:ideology_vanguardist
							has_ideology = ideology:ideology_communist
							has_ideology = ideology:ideology_anarchist
						}
					}
				}
				add = 100
			}
		}
		custom_tooltip = {
			text = russerf_tt_regress_5
			change_variable = { name = pec_russerf_progress_var subtract = 5 }
		}
		add_radicals = {
			value = 0.01
			pop_type = peasants
		}
		scope:pec_russerf5_capital = {
			add_loyalists_in_state = {
				value = 0.10
				pop_type = aristocrats
			}
		}
		scope:pec_russerf5_origin = {
			add_radicals_in_state = {
				value = 0.15
				pop_type = peasants
			}
			add_radicals_in_state = {
				value = 0.15
				pop_type = clergymen
			}
		}
	}

	option = {
		name = pec_russerf.5.c # make the priest the new patriarch of the church
		ai_chance = {
			base = 150
		}
		highlighted_option = yes
		trigger = {
			ruler = {
				OR = {
					has_ideology = ideology:ideology_market_liberal
					has_ideology = ideology:ideology_abolitionist
					has_ideology = ideology:ideology_land_reformer
					has_ideology = ideology:ideology_distributist
					has_ideology = ideology:ideology_pec_liberal_nationalist
					has_ideology = ideology:ideology_pec_metallist
					has_ideology = ideology:ideology_pec_centralbanker
				}
			}
		}
		custom_tooltip = {
			text = russerf_tt_progress_10
			change_variable = { name = pec_russerf_progress_var add = 10 }
		}
		add_loyalists = {
			value = 0.03
			pop_type = peasants
		}
		add_radicals = {
			value = 0.15
			pop_type = clergymen
		}
		add_radicals = {
			value = 0.1
			pop_type = aristocrats
		}
		ig:ig_devout = {
			leader = {
				kill_character = yes
			}
		}
		create_character = {
			ig_leader = yes
			interest_group = ig:ig_devout
			ideology = ideology:ideology_abolitionist
			traits = { 
				direct
				ambitious
				charismatic
			} 
		}
	}
}

# Dmitry Milyutin
pec_russerf.6 = {
	type = country_event
	placement = root
	title = pec_russerf.6.t
	desc = pec_russerf.6.d
	flavor = pec_russerf.6.f

	duration = 3
	cooldown = { months = 2000 }

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	event_image = {
		video = "unspecific_military_parade"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	immediate = {
		ig:ig_armed_forces = {
			save_scope_as = pec_russerf6_ig
		}
	}

	trigger = {
	}

	option = {
		name = pec_russerf.6.a # make token military reforms
		default_option = yes
		ai_chance = {
			base = 0
		}
		custom_tooltip = {
			text = russerf_tt_progress_5
			change_variable = { name = pec_russerf_progress_var add = 5 }
		}
		if = {
			limit = {
				has_law = law_type:law_peasant_levies
			}
			custom_tooltip = {
				text = pec_russerf_6_tokenreform_levies
			}
		}
		add_modifier = {
			name = pec_russerf_6_tokenreform
			months = 60
		}
		add_loyalists = {
			value = 0.05
			pop_type = officers
		}
		add_loyalists = {
			value = 0.15
			pop_type = soldiers
		}
		add_radicals = {
			value = 0.05
			pop_type = aristocrats
		}
		create_character = {
			first_name = "Dmitry"
			last_name = "Milyutin"
			historical = yes
			is_general = yes
			female = no
			noble = yes
			birth_date = 1816.6.28
			dna = dna_pec_dmitry_milyutin
			interest_group = ig:ig_armed_forces
			ideology = ideology:ideology_jingoist_leader
			traits = { 
				innovative
				meticulous
				expert_offensive_planner
			}
			add_modifier = {
				name = pec_russerf_charmod_oppose_serfdom
				months = -1
			}
		}
	}
	option = {
		name = pec_russerf.6.b # no reforms
		ai_chance = {
			base = 10
		}
		custom_tooltip = {
			text = russerf_tt_regress_5
			change_variable = { name = pec_russerf_progress_var subtract = 5 }
		}
		add_radicals = {
			value = 0.05
			pop_type = soldiers
		}
		add_loyalists = {
			value = 0.15
			pop_type = aristocrats
		}
		ig:ig_landowners = {
			add_modifier = {
				name = pec_russerf6_igmod_landowners_pos
				months = 60
			}
		}
	}

	option = {
		name = pec_russerf.6.c # appoint milyutin
		ai_chance = {
			base = 100
			modifier = {
				trigger = {
					has_law = law_type:law_peasant_levies
				}
				add = 250
			}
			modifier = {
				trigger = {
					ruler = {
						OR = {
							has_ideology = ideology:ideology_market_liberal
							has_ideology = ideology:ideology_abolitionist
							has_ideology = ideology:ideology_land_reformer
							has_ideology = ideology:ideology_distributist
							has_ideology = ideology:ideology_pec_liberal_nationalist
							has_ideology = ideology:ideology_pec_metallist
							has_ideology = ideology:ideology_pec_centralbanker
							has_ideology = ideology:ideology_jingoist_leader
						}
					}
				}
				add = 250
			}
		}
		custom_tooltip = {
			text = russerf_tt_progress_10
			change_variable = { name = pec_russerf_progress_var add = 10 }
		}
		if = {
			limit = {
				has_law = law_type:law_peasant_levies
			}
			activate_law = law_type:law_professional_army
			add_modifier = {
				name = pec_russerf_6_reform
				multiplier = 0.5
				months = 60
			}
		}
		else = {
			add_modifier = {
				name = pec_russerf_6_reform
				months = 60
			}
		}
		add_loyalists = {
			value = 0.20
			pop_type = officers
		}
		add_loyalists = {
			value = 0.15
			pop_type = soldiers
		}
		add_radicals = {
			value = 0.15
			pop_type = aristocrats
		}
		ig:ig_landowners = {
			add_modifier = {
				name = pec_russerf6_igmod_landowners
				months = 60
			}
		}
		ig:ig_armed_forces = {
			leader = {
				kill_character = yes
			}
		}
		create_character = {
			first_name = "Dmitry"
			last_name = "Milyutin"
			historical = yes
			ig_leader = yes
			is_general = yes
			female = no
			noble = yes
			birth_date = 1816.6.28
			dna = dna_pec_dmitry_milyutin
			interest_group = ig:ig_armed_forces
			ideology = ideology:ideology_jingoist_leader
			traits = { 
				innovative
				meticulous
				expert_offensive_planner
			}
		}
		ig:ig_armed_forces = {
			leader = {
				add_modifier = {
					name = pec_russerf_charmod_oppose_serfdom
					months = -1
				}
			}
		}
	}
}


pec_russerf.7 = {	
	type = country_event 
	hidden = yes

	cooldown = { months = 12 }
	
	trigger = {
		empty_agitator_slots >= 1
		NOT = {
			any_scope_character = {
				has_ideology = ideology:ideology_pec_agrarian_socialist
			}
		}
	}	
		
	immediate = {
		random_list = {
			95 = {
				create_character = {
					is_agitator = yes
					interest_group = ig:ig_intelligentsia
					ideology = ideology:ideology_pec_agrarian_socialist
					traits = { 
						inspirational_orator
						reckless
					} 
				}
			}
			5 = {
				create_character = {
					is_agitator = yes
					interest_group = ig:ig_rural_folk
					ideology = ideology:ideology_pec_agrarian_socialist
					traits = { 
						inspirational_orator
						reckless
					} 
				}
			}
		}
	}		
}

pec_russerf.8 = {	
	type = country_event 
	hidden = yes
	
	trigger = {				
	}	
		
	immediate = {
		change_variable = { name = pec_russerf_progress_var add = 50 }
		set_variable = pec_russerf_initial_progress_set
	}		
}