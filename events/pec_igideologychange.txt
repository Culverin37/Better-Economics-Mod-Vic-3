namespace = pec_igideologychange

pec_igideologychange.1 = {
	type = country_event
	placement = root
	title = pec_igideologychange.1.t
	desc = pec_igideologychange.1.d
	flavor = pec_igideologychange.1.f

	duration = 3

	event_image = {
		video = "europenorthamerica_london_center"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		ig:ig_petty_bourgeoisie = {
			save_scope_as = pec_igrepublicanism1_ig
			leader = {
				save_scope_as = pec_igrepublicanism1_leader
			}
		}
	}

	trigger = {
	}

	option = {
		name = pec_igideologychange.1.a
		default_option = yes
		ai_chance = {
			base = 90
		}
		if = {
			limit = {
				ig:ig_petty_bourgeoisie = {
					has_ideology = ideology:ideology_reactionary
				}
			}
			ig:ig_petty_bourgeoisie = {
				remove_ideology = ideology_reactionary
				add_ideology = ideology_reactionary_republican
			}
		}
		else_if = {
			limit = {
				ig:ig_petty_bourgeoisie = {
					has_ideology = ideology:ideology_reactionary_tolerant
				}
			}
			ig:ig_petty_bourgeoisie = {
				remove_ideology = ideology_reactionary_tolerant
				add_ideology = ideology_reactionary_republican_tolerant
			}
		}
	}
	option = {
		name = pec_igideologychange.1.b
		ai_chance = {
			base = 10
		}
		ig:ig_petty_bourgeoisie = {
			add_modifier = {
				name = pec_igmod_landowners_noreform
				multiplier = 0.5
				months = 61
			}
		}
		add_radicals = {
			value = 0.2
			interest_group = ig:ig_petty_bourgeoisie
		}
		add_radicals = {
			value = 0.01
		}
	}
}

pec_igideologychange.2 = {
	type = country_event
	placement = root
	title = pec_igideologychange.2.t
	desc = pec_igideologychange.2.d
	flavor = pec_igideologychange.2.f

	duration = 3

	event_image = {
		video = "europenorthamerica_russian_serfs"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		ig:ig_landowners = {
			save_scope_as = pec_landownermodern_ig
			leader = {
				save_scope_as = pec_landownermodern_leader
			}
		}
	}

	trigger = {
	}

	option = {
		name = pec_igideologychange.2.a # appeal to rural capitalists and shopkeepers
		default_option = yes
		ai_chance = {
			base = 40
			modifier = {
				trigger = {
					has_law = law_type:law_commercialized_agriculture
				}
				add = 150
			}
		}
		custom_tooltip = {
			text = pec_landownermodern1a_tt
		}
		ig:ig_landowners = {
			remove_ideology = ideology_stratocratic
			add_ideology = ideology_pec_aristocratic_capitalist
		}
	}
	option = {
		name = pec_igideologychange.2.b # appeal to wealthy farmers
		ai_chance = {
			base = 40
			modifier = {
				trigger = {
					has_law = law_type:law_homesteading
				}
				add = 150
			}
		}
		custom_tooltip = {
			text = pec_landownermodern1b_tt
		}
		ig:ig_landowners = {
			remove_ideology = ideology_stratocratic
			add_ideology = ideology_pec_aristocratic_middlefarmer
		}
	}
	option = {
		name = pec_igideologychange.2.c # maintain tradition
		ai_chance = {
			base = 5
		}
		add_radicals = {
			value = 0.2
			interest_group = ig:ig_landowners
		}
		add_radicals = {
			value = 0.05
			pop_type = aristocrats
		}
		add_radicals = {
			value = 0.02
			pop_type = officers
		}
		add_radicals = {
			value = 0.02
			pop_type = farmers
		}
		ig:ig_landowners = {
			add_modifier = {
				name = pec_igmod_landowners_noreform
				months = 61
			}
		}
	}
}

pec_igideologychange.3 = {
	type = country_event
	placement = root
	title = pec_igideologychange.3.t
	desc = pec_igideologychange.3.d
	flavor = pec_igideologychange.3.f

	duration = 3

	event_image = {
		video = "europenorthamerica_russian_serfs"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		ig:ig_trade_unions = {
			save_scope_as = pec_lawtradeunionevents1_ig
			leader = {
				save_scope_as = pec_lawtradeunionevents1_leader
			}
		}
	}

	trigger = {
	}

	option = {
		name = pec_igideologychange.3.a # become less radical
		default_option = yes
		ai_chance = {
			base = 40
			modifier = {
				trigger = {
					has_law = law_type:law_council_republic
				}
				add = -40
			}
		}
		ig:ig_trade_unions = {
			remove_ideology = ideology_socialist
		}
	}
	option = {
		name = pec_igideologychange.3.b # continue to be radical
		ai_chance = {
			base = 30
			modifier = {
				trigger = {
					has_law = law_type:law_council_republic
				}
				add = 100
			}
		}
		add_radicals = {
			value = 0.1
			pop_type = machinists
		}
		add_radicals = {
			value = 0.1
			pop_type = laborers
		}
	}
}

pec_igideologychange.4 = {
	type = country_event
	placement = root
	title = pec_igideologychange.4.t
	desc = pec_igideologychange.4.d
	flavor = pec_igideologychange.4.f

	duration = 3

	event_image = {
		video = "europenorthamerica_russian_serfs"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		ig:ig_devout = {
			save_scope_as = pec_devoutmodern_ig
			leader = {
				save_scope_as = pec_devoutmodern_leader
			}
		}
	}

	trigger = {
	}

	option = {
		name = pec_igideologychange.4.a # liberalize religion
		default_option = yes
		ai_chance = {
			base = 40
		}
		custom_tooltip = {
			text = pec_devoutmodern1_tt
		}
		ig:ig_devout = {
			remove_ideology = ideology_moralist
			add_ideology = ideology_pec_religious_pluralist
		}
		if = {
			limit = {
				ig:ig_devout = {
					has_ideology = ideology:ideology_russian_patriarch
				}
			}
			ig:ig_devout = {
				remove_ideology = ideology_russian_patriarch
				add_ideology = ideology_patriarchal
			}
		}
	}
	option = {
		name = pec_igideologychange.4.b # advocate for the poor
		ai_chance = {
			base = 40
		}
		custom_tooltip = {
			text = pec_devoutmodern2_tt
		}
		ig:ig_devout = {
			remove_ideology = ideology_moralist
			add_ideology = ideology_pec_social_theology
		}
		if = {
			limit = {
				ig:ig_devout = {
					has_ideology = ideology:ideology_russian_patriarch
				}
			}
			ig:ig_devout = {
				remove_ideology = ideology_russian_patriarch
				add_ideology = ideology_patriarchal
			}
		}
	}
	option = {
		name = pec_igideologychange.4.c # maintain tradition
		ai_chance = {
			base = 5
		}
		add_radicals = {
			value = 0.2
			interest_group = ig:ig_devout
		}
		add_radicals = {
			value = 0.01
		}
		ig:ig_devout = {
			add_modifier = {
				name = pec_igmod_landowners_noreform
				months = 61
			}
		}
	}
}

pec_igideologychange.5 = {
	type = country_event
	placement = root
	title = pec_igideologychange.5.t
	desc = pec_igideologychange.5.d
	flavor = pec_igideologychange.5.f

	duration = 3

	event_image = {
		video = "europenorthamerica_london_center"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		ig:ig_intelligentsia = {
			save_scope_as = pec_intelligentsiamodern_ig
			leader = {
				save_scope_as = pec_intelligentsiamodern_leader
			}
		}
	}

	trigger = {
	}

	option = {
		name = pec_igideologychange.5.a # liberalize
		default_option = yes
		ai_chance = {
			base = 80
		}
		ig:ig_intelligentsia = {
			remove_ideology = ideology_pec_oldworld_liberal
			add_ideology = ideology_pec_oldworld_liberal_reformed
		}
	}
	option = {
		name = pec_igideologychange.5.b # steady on
		ai_chance = {
			base = 20
		}
		add_radicals = {
			value = 0.15
			pop_type = academics
		}
		add_radicals = {
			value = 0.10
			pop_type = engineers
		}
		add_radicals = {
			value = 0.01
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = pec_igmod_intelligentsia_noreform
				months = 61
			}
		}
	}
}

pec_igideologychange.6 = {
	type = country_event
	placement = root
	title = pec_igideologychange.6.t
	desc = pec_igideologychange.6.d
	flavor = pec_igideologychange.6.f

	duration = 3

	event_image = {
		video = "europenorthamerica_london_center"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		ig:ig_intelligentsia = {
			save_scope_as = pec_intelligentsiamodern_ig
			leader = {
				save_scope_as = pec_intelligentsiamodern_leader
			}
		}
	}

	trigger = {
	}

	option = {
		name = pec_igideologychange.6.a # nationalism
		default_option = yes
		ai_chance = {
			base = 80
		}
		ig:ig_intelligentsia = {
			remove_ideology = ideology_pec_oldworld_liberal
			add_ideology = ideology_pec_oldworld_liberal_ethnic
		}
	}
	option = {
		name = pec_igideologychange.6.b # steady on
		ai_chance = {
			base = 20
		}
		add_radicals = {
			value = 0.15
			pop_type = academics
		}
		add_radicals = {
			value = 0.10
			pop_type = engineers
		}
		add_radicals = {
			value = 0.01
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = pec_igmod_intelligentsia_noreform
				months = 61
			}
		}
	}
}

pec_igideologychange.7 = {
	type = country_event
	placement = root
	title = pec_igideologychange.7.t
	desc = pec_igideologychange.7.d
	flavor = pec_igideologychange.7.f

	duration = 3

	event_image = {
		video = "europenorthamerica_london_center"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		if = {
			limit = {
				ig:ig_petty_bourgeoisie = {
					leader = {
						OR = {
							has_ideology = ideology:ideology_reformer
							has_ideology = ideology:ideology_humanitarian
							has_ideology = ideology:ideology_humanitarian_royalist
							has_ideology = ideology:ideology_integralist
							has_ideology = ideology:ideology_anarchist
						}
					}
				}
			}
			ig:ig_petty_bourgeoisie = {
				save_scope_as = pec_tolerant_ig
				leader = {
					save_scope_as = pec_tolerance_leader
				}
			}
		}
		else_if = {
			limit = {
				ig:ig_pec_unorganized_labour = {
					leader = {
						OR = {
							has_ideology = ideology:ideology_reformer
							has_ideology = ideology:ideology_humanitarian
							has_ideology = ideology:ideology_humanitarian_royalist
							has_ideology = ideology:ideology_integralist
							has_ideology = ideology:ideology_anarchist
						}
					}
				}
			}
			ig:ig_pec_unorganized_labour = {
				save_scope_as = pec_tolerant_ig
				leader = {
					save_scope_as = pec_tolerance_leader
				}
			}
		}
		ig:ig_petty_bourgeoisie = {
			save_scope_as = pec_tolerant_pb_ig
		}
		ig:ig_pec_unorganized_labour = {
			save_scope_as = pec_tolerant_iw_ig
		}
	}

	trigger = {
	}

	option = {
		name = pec_igideologychange.7.a # petite bourgeois tolerance
		highlighted_option = yes
		trigger = {
			ig:ig_petty_bourgeoisie = {
				leader = {
					OR = {
						has_ideology = ideology:ideology_reformer
						has_ideology = ideology:ideology_humanitarian
						has_ideology = ideology:ideology_humanitarian_royalist
						has_ideology = ideology:ideology_integralist
						has_ideology = ideology:ideology_anarchist
					}
				}
			}
		}
		ai_chance = {
			base = 90
		}
		custom_tooltip = pec_tolerance_pb_tt
		if = {
			limit = {
				ig:ig_petty_bourgeoisie = {
					has_ideology = ideology:ideology_reactionary
				}
			}
			ig:ig_petty_bourgeoisie = {
				remove_ideology = ideology_reactionary
				add_ideology = ideology_reactionary_tolerant
			}
		}
		else_if = {
			limit = {
				ig:ig_petty_bourgeoisie = {
					has_ideology = ideology:ideology_reactionary_republican
				}
			}
			ig:ig_petty_bourgeoisie = {
				remove_ideology = ideology_reactionary_republican
				add_ideology = ideology_reactionary_republican_tolerant
			}
		}
	}
	option = {
		name = pec_igideologychange.7.b # independent worker tolerance
		highlighted_option = yes
		trigger = {
			ig:ig_pec_unorganized_labour = {
				leader = {
					OR = {
						has_ideology = ideology:ideology_reformer
						has_ideology = ideology:ideology_humanitarian
						has_ideology = ideology:ideology_humanitarian_royalist
						has_ideology = ideology:ideology_integralist
						has_ideology = ideology:ideology_anarchist
					}
				}
			}
		}
		ai_chance = {
			base = 90
		}
		custom_tooltip = pec_tolerance_iw_tt
		ig:ig_pec_unorganized_labour = {
			remove_ideology = ideology_pec_lumpenpatriotism
			add_ideology = ideology_pec_lumpenpatriotism_tolerant
		}
	}

	option = {
		name = pec_igideologychange.7.c # no tolerance
		default_option = yes
		ai_chance = {
			base = 5
		}
		add_radicals = {
			value = 0.02
		}
	}
}

pec_igideologychange.8 = {
	type = country_event
	placement = root
	title = pec_igideologychange.8.t
	desc = pec_igideologychange.8.d
	flavor = pec_igideologychange.8.f

	duration = 3

	event_image = {
		video = "europenorthamerica_london_center"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		ig:ig_industrialists = {
			save_scope_as = pec_laissez_faire_ig
		}
	}

	trigger = {
	}

	option = {
		name = pec_igideologychange.8.a # freedom of trade
		default_option = yes
		ig:ig_industrialists = {
			remove_ideology = ideology_laissez_faire_pec_prot
			add_ideology = ideology_laissez_faire
		}
	}
}